!function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t){function a(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),r.forEach(function(t){n(e,t,a[t])})}return e}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=flo_instagram_users_data.flo_instagram_accounts,o=flo_instagram_users_data.masterKey,l=new Promise(function(e,t){jQuery.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"flo_get_all_user_objects"},success:function(t){return e(t)},error:function(e){return t(e)}})}),s=Object.keys(i).map(function(e){return{value:i[e],label:i[e]}}),c=wp.blocks.registerBlockType,u=wp.editor,m=u.InspectorControls,g=u.RichText,b=wp.components,f=b.SelectControl,p=b.ToggleControl,d=b.RangeControl,A=b.PanelBody;b.PanelRow,b.Panel;c("flo/flo-instagram-feed",{title:"Flo Social",icon:"instagram",category:"common",attributes:{paddingSize:{default:5},imagesPerRow:{default:6},numberOfImages:{default:6},numberOfImagesMobile:{default:6},imageSize:{default:"320x320_crop"},enableLinkToProfile:{default:1},previewUser:{default:{}},previewUserName:{default:""},shortcode:{default:""},preview:{default:!1}},edit:function(e){if(e.attributes.preview){var t=JSON.parse(e.attributes.preview);e.setAttributes({paddingSize:t.padding}),e.setAttributes({imagesPerRow:t.columns}),e.setAttributes({numberOfImages:t.images}),"inherit"===t.mobileImages?e.setAttributes({imageSize:t.images}):e.setAttributes({numberOfImagesMobile:t.mobileImages}),e.setAttributes({imageSize:t.sizes}),e.setAttributes({previewUserName:t.account}),l.then(function(t){t.data[_]&&e.setAttributes({previewUser:JSON.parse(t.data[_])})}),e.setAttributes({enableLinkToProfile:t.linked}),e.setAttributes({preview:!1})}e.attributes.previewUser&&""===e.attributes.previewUserName&&o&&(l.then(function(t){t.data[o]&&e.setAttributes({previewUser:JSON.parse(t.data[o])})}),e.setAttributes({previewUserName:o}));var n=e.attributes,i=n.paddingSize,c=n.imagesPerRow,u=n.numberOfImages,b=n.imageSize,v=n.numberOfImagesMobile,w=n.enableLinkToProfile,y=n.previewUser,_=n.previewUserName,h='[flo_instagram padding="'.concat(i,'" picture_sizes="').concat(b,'" link="').concat(w,'" nr_columns="').concat(c,'" mobile_images_row="').concat(v,'" limit="').concat(u,'" new_user_id="').concat(_,'" access_token="new"]');e.setAttributes({shortcode:h});var O={display:"block",width:"100%"},R={cursor:"default",outline:"none",boxShadow:"none",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",border:"none",marginRight:0,margin:i/2,boxSizing:"border-box",width:"calc(".concat(100/c,"% - ").concat(i,"px)")},S={display:"block",width:"calc(100% / ".concat(c,")"),padding:i/2-4,border:"1px solid #e9e9e9",marginRight:2,marginLeft:2};var x=o?null:React.createElement("a",{className:"floInstagram_preview--error-wrapper",href:"admin.php?page=flo_instagram"},React.createElement("div",{className:"floInstagram_preview--error"},"Please add at least one user from the settings page"));return[React.createElement(m,null,React.createElement(A,{title:"Shortcode settings",initialOpen:!0},x,React.createElement(d,{label:"Padding between images",value:i,onChange:function(t){e.setAttributes({paddingSize:t})},min:0,max:20}),React.createElement(d,{label:"Images per row",value:c,onChange:function(t){e.setAttributes({imagesPerRow:t})},min:1,max:12}),React.createElement(d,{label:"Number of images",value:u,onChange:function(t){e.setAttributes({numberOfImages:t})},min:1,max:12}),React.createElement(f,{label:"Image sizes",value:b,onChange:function(t){e.setAttributes({imageSize:t})},options:[{value:"150x150_crop",label:"Crop 150x150"},{value:"240x240_crop",label:"Crop 240x240"},{value:"320x320_crop",label:"Crop 320x320"},{value:"480x480_crop",label:"Crop 480x480"},{value:"640x640_crop",label:"Crop 640x640"},{value:"imagesFull",label:"Full Size images"}]}),React.createElement(f,{label:"User account",value:_,onChange:function(t){l.then(function(a){a.data[t]&&e.setAttributes({previewUser:JSON.parse(a.data[t])})}),e.setAttributes({previewUserName:t})},options:s}),React.createElement(d,{label:"Number of images for mobile devices",value:v,onChange:function(t){e.setAttributes({numberOfImagesMobile:t})},min:1,max:12}),React.createElement(p,{label:"Link images to Instagram",checked:w,onChange:function(t){var a=t?1:0;e.setAttributes({enableLinkToProfile:a})}}))),React.createElement("div",{id:"gbs-block-inspected-box"},React.createElement(g,{style:{visibility:"hidden",height:0,overflow:"hidden"},value:h}),React.createElement("div",{className:"floInstagram_preview-wrapper",style:{margin:0}},React.createElement("div",{className:"floInstagram_preview-inner"},React.createElement("div",{className:"floInstagram_preview-images",style:y.images?{display:"flex",flexWrap:"wrap",padding:0,justifyContent:"center",alignItems:"center"}:{display:"flex"}},y.images?y.images.map(function(e,t){return u>t?React.createElement("a",{key:t,href:"javascript:void(0);",style:r({},R,{backgroundImage:"url(".concat(e.sizes[4].src,")")})},React.createElement("img",{className:"floInstagram_preview-image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",style:O})):null}):a(Array(6)).map(function(e){return React.createElement("img",{key:e,className:"floInstagram_preview-image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",style:S})})))))]},save:function(e){e.attributes.shortcode;return React.createElement("p",null)}})}]);